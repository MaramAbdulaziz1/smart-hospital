<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Patient Dashboard</title>

  <!-- CSS files -->
  <link rel="stylesheet" href="/css/patientdashboard.css"/>
  <!-- Web font: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Notification Styles -->
</head>
<body>
<div class="layout-container">
  <!-- Sidebar (Shared Component) -->
  <div th:replace="components/sidebar :: sidebar('home')"></div>

  <!-- Top Navigation (Shared Component) -->
  <header th:replace="components/top-nav :: top-nav('Smart Hospital')"></header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Success Notification -->
    <div class="notification" id="notification">
      <span id="notificationMessage">Book Successfully!</span>
      <button class="close-btn" onclick="hideNotification()">&times;</button>
    </div>

    <!-- Page Content -->
    <section class="page-content">
      <!-- Upcoming Appointments -->
      <div class="page-heading">Upcoming Appointments</div>
      <section class="upcoming-wrap">
        <div class="upcoming-card">
          <div class="line-1">05 07 2025</div>
          <div class="line-2">10:00</div>
          <div class="line-3">Vital</div>
        </div>
        <div class="upcoming-card">
          <div class="line-1">07 07 2025</div>
          <div class="line-2">13:00</div>
          <div class="line-3">Dr. Weasley</div>
        </div>
      </section>

      <!-- Make Appointments -->
      <section class="panel">
        <h3>Make Appointments</h3>
        <form id="appointmentForm" onsubmit="handleDoctorAppointment(event)">
          <div class="form-grid">
            <div>
              <div class="form-row">
                <div class="field">
                  <label class="label">Department</label>
                  <select id="department" name="department" onchange="loadDoctors()" required>
                    <option value="">- Select Department -</option>
                  </select>
                </div>
                <div class="field">
                  <label class="label">Doctor</label>
                  <select id="doctor" name="doctor" onchange="loadAvailableDates()" required>
                    <option value="">- Please select a department first -</option>
                  </select>
                </div>
              </div>
              <div class="form-row">
                <div class="field">
                  <label class="label">Date</label>
                  <input type="date" id="appointmentDate" name="date" min="" onchange="loadAvailableTimes()" required />
                </div>
                <div class="field">
                  <label class="label">Time</label>
                  <select id="appointmentTime" name="time" required>
                    <option value="">- Select Time -</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="book-col">
              <button type="submit" class="btn">Book</button>
            </div>
          </div>
        </form>
      </section>

      <!-- Make Vital Appointments -->
      <section class="panel">
        <h3>Make Vital Appointments</h3>
        <form id="vitalAppointmentForm" onsubmit="handleVitalAppointment(event)">
          <div class="form-grid">
            <div>
              <div class="form-row">
                <div class="field">
                  <label class="label">Department</label>
                  <select id="vitalDepartment" name="department" onchange="loadNurses()" required>
                    <option value="">- Select Department -</option>
                  </select>
                </div>
                <div class="field">
                  <label class="label">Nurse</label>
                  <select id="nurse" name="nurse" onchange="loadVitalAvailableDates()" required>
                    <option value="">- Please select a department first -</option>
                  </select>
                </div>
              </div>
              <div class="form-row">
                <div class="field">
                  <label class="label">Date</label>
                  <input type="date" id="vitalDate" name="date" min="" onchange="loadVitalAvailableTimes()" required />
                </div>
                <div class="field">
                  <label class="label">Time</label>
                  <select id="vitalTime" name="time" required>
                    <option value="">- Select Time -</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="book-col">
              <button type="submit" class="btn">Book</button>
            </div>
          </div>
        </form>
      </section>
    </section>
  </main>
</div>

<!-- JavaScript -->
<script src="/js/patientdashboard.js"></script>
</body>
</html>
