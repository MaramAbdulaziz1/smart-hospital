<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title th:text="${pageTitle}">Coming Soon</title>
  <link rel="stylesheet" href="/css/comingSoon.css" />
  <!-- Web font: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>

<div class="layout-container">
  <!-- Patient Sidebar: Left vertical navigation -->
  <aside class="sidebar">
    <!-- Logo at the top of the sidebar -->
    <img th:src="@{/SharedLayoutImages/LogoCircle.png}" alt="Logo" class="logo">

    <!-- Patient Navigation Links -->
    <nav class="sidebar-nav">
      <div class="tab" data-page="home">
        <a href="/patient/patientDashboard">
          <img th:src="@{/SharedLayoutImages/homeIcon.svg}" alt="Home Icon" class="tab-icon">
          <span>Home</span>
        </a>
      </div>

      <div class="tab" data-page="calendar">
        <a th:href="@{/comingSoon}">
          <img th:src="@{/SharedLayoutImages/calendarIcon.svg}" alt="Calendar Icon" class="tab-icon">
          <span>Calendar</span>
        </a>
      </div>

      <!-- Active tab styling applied here for Health Q&A page -->
      <div class="tab active-tab" data-page="health-qa">
        <a th:href="@{/healthQA}">
          <img th:src="@{/PatientSideImages/healthQA.svg}" alt="Health Q&A Icon" class="tab-icon">
          <span>Health Q&A</span>
        </a>
      </div>

      <div class="tab" data-page="manage-appointments">
        <a href="/patient/manageAppointments">
          <img th:src="@{/PatientSideImages/ManageAppointment.svg}" alt="Manage Appointments Icon" class="tab-icon">
          <span>Manage Appointments</span>
        </a>
      </div>
    </nav>

    <!-- Logout Button at the bottom -->
    <div class="tab logout-tab" data-action="logout">
      <img th:src="@{/SharedLayoutImages/logoutIcon.svg}" alt="Logout Icon" class="tab-icon">
      <span>Log Out</span>
    </div>
  </aside>

  <!-- Patient-side Top Navigation -->
  <header class="top-nav">
    <h1 class="page-title" th:text="${pageTitle}">Coming Soon</h1>

    <div class="header-icons-container">
      <!-- Notifications -->
      <div class="notification-container">
        <img th:src="@{/SharedLayoutImages/notificationIcon.svg}" alt="Notifications" class="notification-icon" id="notificationIcon" />
        <div class="notification-popup" id="notificationPopup">
          <div class="notification-header">
            <h3>Notifications</h3>
            <button class="close-btn" id="closeNotifications" aria-label="Close notifications">&times;</button>
          </div>
          <div class="notification-list">
            <div class="notification-item unread">
              <div class="notification-content">
                <div class="notification-title">Your appointment is confirmed for tomorrow at 2:00 PM</div>
                <div class="notification-time">5 minutes ago</div>
              </div>
              <div class="notification-dot"></div>
            </div>
            <div class="notification-item unread">
              <div class="notification-content">
                <div class="notification-title">New test results are available</div>
                <div class="notification-time">1 hour ago</div>
              </div>
              <div class="notification-dot"></div>
            </div>
            <div class="notification-item">
              <div class="notification-content">
                <div class="notification-title">Prescription refill reminder</div>
                <div class="notification-time">2 hours ago</div>
              </div>
            </div>
          </div>
          <div class="notification-footer">
            <button class="mark-all-read" type="button">Mark all as read</button>
            <button class="view-all" type="button">View all notifications</button>
          </div>
        </div>
      </div>

      <!-- Profile -->
      <div class="profile-container">
        <img th:src="@{/PatientProfile-PatientSide/patientProfilePic.png}" alt="Patient Profile" class="patient-profile" id="patientProfileIcon" />
        <div class="profile-popup" id="profilePopup">
          <div class="profile-header">
            <img th:src="@{/PatientProfile-PatientSide/patientProfilePic.png}" alt="Patient Profile" class="profile-avatar" />
            <div class="profile-info">
              <h3>Harry Potter</h3>
              <p>Patient ID: HAT17653D</p>
            </div>
            <button class="close-btn" id="closeProfile" aria-label="Close profile">&times;</button>
          </div>
          <div class="profile-menu">
            <!-- Key link - points to patient-side profile -->
            <a th:href="@{/patientProfile-patientSide}" class="profile-menu-item" data-action="profile">
              <img th:src="@{/SharedLayoutImages/profileIcon.svg}" alt="Profile" class="menu-icon" />
              <span>My Profile</span>
            </a>

            <div class="profile-divider"></div>
            <div class="profile-menu-item logout" data-action="logout">
              <img th:src="@{/PatientProfile-PatientSide/logoutIcon.svg}" alt="Logout" class="menu-icon" />
              <span>Log Out</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Coming Soon Content -->
    <section class="coming-soon-content">
      <div class="coming-soon-container">
        <!-- Coming Soon Icon -->
        <div class="coming-soon-icon">
          <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="60" cy="60" r="60" fill="#7C3AED"/>
            <path d="M40 45L50 35L70 55L80 45" stroke="#FCD34D" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M40 65L50 55L70 75L80 65" stroke="#FCD34D" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M40 85L50 75L70 95L80 85" stroke="#FCD34D" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>

        <!-- Coming Soon Text -->
        <h1 class="coming-soon-title">Coming Soon</h1>
        <p class="coming-soon-subtitle">This feature is currently under development.</p>
        <p class="coming-soon-description">Looking forward to serving you soon!</p>

        <!-- Optional: Back to Home Button -->
        <div class="coming-soon-actions">
          <a href="/patient/patientDashboard" class="back-to-home-btn">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.5 15L2.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2.5 10H17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to Home
          </a>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Scripts -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    /* Notifications */
    const notificationIcon = document.getElementById('notificationIcon');
    const notificationPopup = document.getElementById('notificationPopup');
    const closeNotifications = document.getElementById('closeNotifications');

    if (notificationIcon && notificationPopup) {
      notificationIcon.addEventListener('click', (e) => {
        e.stopPropagation();
        notificationPopup.classList.toggle('show');
        const profilePopup = document.getElementById('profilePopup');
        if (profilePopup) profilePopup.classList.remove('show');
      });
      closeNotifications.addEventListener('click', () => notificationPopup.classList.remove('show'));
    }

    /* Profile popup */
    const patientProfileIcon = document.getElementById('patientProfileIcon');
    const profilePopup = document.getElementById('profilePopup');
    const closeProfile = document.getElementById('closeProfile');

    if (patientProfileIcon && profilePopup) {
      patientProfileIcon.addEventListener('click', (e) => {
        e.stopPropagation();
        profilePopup.classList.toggle('show');
        if (notificationPopup) notificationPopup.classList.remove('show');
      });
      closeProfile.addEventListener('click', () => profilePopup.classList.remove('show'));
    }

    /* Close popups when clicking outside */
    document.addEventListener('click', (e) => {
      if (notificationPopup && !notificationPopup.contains(e.target) && e.target !== notificationIcon) {
        notificationPopup.classList.remove('show');
      }
      if (profilePopup && !profilePopup.contains(e.target) && e.target !== patientProfileIcon) {
        profilePopup.classList.remove('show');
      }
    });

    /* Mark all notifications as read */
    const markAllReadBtn = document.querySelector('.mark-all-read');
    if (markAllReadBtn) {
      markAllReadBtn.addEventListener('click', () => {
        document.querySelectorAll('.notification-item.unread').forEach(item => {
          item.classList.remove('unread');
          const dot = item.querySelector('.notification-dot');
          if (dot) dot.remove();
        });
      });
    }

    /* Logout */
    const logoutBtns = document.querySelectorAll('[data-action="logout"]');
    logoutBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        if (confirm('Are you sure you want to log out?')) {
          window.location.href = '/patient-login';
        }
      });
    });

    /* Active tab highlighting - Health Q&A specific */
    const tabs = document.querySelectorAll('.tab[data-page]');
    const currentPage = window.location.pathname;

    // Handle Health Q&A pages - highlight the Health Q&A tab
    if (currentPage === '/healthQA') {
      tabs.forEach(tab => {
        const tabPage = tab.getAttribute('data-page');
        if (tabPage === 'health-qa') {
          tab.classList.add('active-tab');
        } else {
          tab.classList.remove('active-tab');
        }
      });
    } else {
      tabs.forEach(tab => {
        const link = tab.querySelector('a');
        if (link && link.getAttribute('href') === currentPage) {
          tab.classList.add('active-tab');
        }
      });
    }
  });
</script>

</body>
</html>
